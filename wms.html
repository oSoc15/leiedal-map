<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!--The viewport meta tag is used to improve the presentation and behavior of the samples
      on iOS devices-->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">
    <title>Map with WMS</title>

    <link rel="stylesheet" href="http://js.arcgis.com/3.13/dijit/themes/claro/claro.css">
    <link rel="stylesheet" href="http://js.arcgis.com/3.13/esri/css/esri.css">
    <style>
        html,
        body,
        #map {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            background-color: #FFF;
            overflow: hidden;
            font-family: "Trebuchet MS";
        }
    </style>
    <script src="http://js.arcgis.com/3.13/"></script>

    <script>
        var map;

        require(["esri/map", "esri/layers/WMSLayer", "esri/config", "esri/layers/ArcGISDynamicMapServiceLayer", "dojo/domReady!"],
            function (Map, WMSLayer, esriConfig, ArcGISDynamicMapServiceLayer) {

                //Setting a proxy to handle WMS based maps

		        //Add the proxy URL
                esriConfig.defaults.io.proxyUrl = "proxy";
                esriConfig.defaults.io.alwaysUseProxy = false;

                map = new Map("map", {
                    basemap: "dark-gray",
                    center: [3.27764, 50.81993],
                    zoom: 10,
                    sliderStyle: "small"
                });

                //Adding the WMS baselayer

                var wmsLayer = new WMSLayer("http://grb.agiv.be/geodiensten/raadpleegdiensten/GRB-basiskaart/wmsgr", {
                    format: "png",
                    visibleLayers: [2]
                });

                map.addLayer(wmsLayer);

                var energylabelLayer = new ArcGISDynamicMapServiceLayer("http://www.govmaps.eu/arcgis/rest/services/ICL/ICL_Energielabelatlas/MapServer", {
                    "id": "energylabelLayer",
                    "opacity": 1
                });

                map.addLayer(energylabelLayer);

            });
    </script>
</head>

<body>
    <div id="map"></div>
</body>

</html>
