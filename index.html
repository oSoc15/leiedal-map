<html>
    <head>
        <title>Energylabel</title>
        <link rel="stylesheet" href="http://js.arcgis.com/3.13/esri/css/esri.css">
        <link rel="stylesheet" href="css/map.css">
        <script src="http://js.arcgis.com/3.13/"></script>
        <script>
            require([
                    "esri/layers/ArcGISDynamicMapServiceLayer",
                    "esri/layers/WMSLayer",
                    "esri/layers/WMSLayerInfo",
                    "esri/geometry/Extent",
                    "esri/map",
                    "dojo/domReady!"
            ], function (ArcGISDynamicMapServiceLayer, WMSLayer, WMSLayerInfo, Extent, Map) {

                /*
                 *  MAP
                 */
                var map = new Map("map", {
                    //basemap: "topo",
                    zoom: 10,
                    center: [3.27764, 50.81993],
                    sliderStyle: "small",
                    logo: false
                });

                /*
                 *  Layers
                 */

                // GRB-layer
                var grbLayerInfo = new WMSLayerInfo({
                    name: 'GRB_BASISKAART',
                    title: 'GRB'
                });

                var resourceInfo = {
                    extent: new Extent(12000, 143000, 269000, 255000, {
                    wkid: 31370
                    }),
                    layerInfos: [grbLayerInfo]
                };

                var grbLayer = new WMSLayer('http://grb.agiv.be/geodiensten/raadpleegdiensten/GRB-basiskaart/wmsgr?', {
                    resourceInfo: resourceInfo,
                    visibleLayers: ['GRB_BASISKAART']
                });

                map.addLayers([grbLayer]);

                // Ortho-layer
                var orthoLayerInfo = new WMSLayerInfo({
                    name: 'Ortho',
                    title: 'Ortho'
                });

                var resourceInfo = {
                    // new Extent(xmin, ymin, ymax, ymax)
                    extent: new Extent(22000, 150000, 259000, 245000, { wkid: 31370 }),
                    layerInfos: [orthoLayerInfo]
                };

                var orthoLayer = new WMSLayer('http://wms.agiv.be/ogc/wms/omkl?', {
                    resourceInfo: resourceInfo,
                    visibleLayers: ['Ortho']
                });
                map.addLayers([orthoLayer]);

                //Energylabel layer
                var energylabelLayerURL = "http://www.govmaps.eu/arcgis/rest/services/ICL/ICL_Energielabelatlas/MapServer";

                var energylabelLayerOptions = {
                    "id": "energylabelLayer",
                    "opacity": 0.8,
                    "showAttribution": false
                };
                var energylabelLayer = new ArcGISDynamicMapServiceLayer(energylabelLayerURL, energylabelLayerOptions);

                var layerDefinitions = [];
                layerDefinitions[2] = "LABEL = 'E'";
                energylabelLayer.setLayerDefinitions(layerDefinitions);

                map.addLayer(energylabelLayer);

            });
        </script>
    </head>
    <body>
        <div id="map"></div>
    </body>
</html>
